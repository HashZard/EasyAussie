# ç»Ÿä¸€è§’è‰²ç®¡ç†ç³»ç»Ÿ

## æ¦‚è¿°

è¿™ä¸ªç»Ÿä¸€çš„è§’è‰²ç®¡ç†ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªé›†ä¸­å¼çš„æ–¹å¼æ¥ç®¡ç†ç”¨æˆ·è§’è‰²ï¼Œæ”¯æŒåŠ¨æ€ä»åç«¯è·å–è§’è‰²åˆ—è¡¨ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„è§’è‰²æ˜¾ç¤ºåç§°æ˜ å°„ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸ”„ **åŠ¨æ€è§’è‰²åŠ è½½**: è‡ªåŠ¨ä»åç«¯APIè·å–æœ€æ–°çš„è§’è‰²åˆ—è¡¨
- ğŸ¨ **ç»Ÿä¸€æ˜¾ç¤ºæ˜ å°„**: æä¾›ä¸€è‡´çš„è§’è‰²æ˜¾ç¤ºåç§°å’Œæ ·å¼é…ç½®
- ğŸ”§ **å¯æ‰©å±•é…ç½®**: æ”¯æŒæ·»åŠ è‡ªå®šä¹‰è§’è‰²æ˜ å°„å’Œé…ç½®
- ğŸ’¾ **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤è¯·æ±‚ï¼Œæé«˜æ€§èƒ½
- ğŸŒ **å…¨å±€å¯ç”¨**: å¯åœ¨ä»»ä½•æ¨¡å—ä¸­ä½¿ç”¨ï¼Œä¿è¯ä¸€è‡´æ€§

## æ–‡ä»¶ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ roles.ts          # æ ¸å¿ƒè§’è‰²ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ admin/
â”‚       â””â”€â”€ users.ts          # ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆä½¿ç”¨ç¤ºä¾‹ï¼‰
â””â”€â”€ examples/
    â””â”€â”€ role-usage-examples.ts # ä½¿ç”¨ç¤ºä¾‹
```

## å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–è§’è‰²ç³»ç»Ÿ

åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–è§’è‰²ç³»ç»Ÿï¼š

```typescript
import { initializeRoleSystem } from './src/config/roles';

// åœ¨åº”ç”¨å¯åŠ¨æ—¶è°ƒç”¨
async function initApp() {
    await initializeRoleSystem();
}
```

### 2. åŸºæœ¬ä½¿ç”¨

```typescript
import { getRoleDisplayName, getRoleConfig } from './src/config/roles';

// è·å–è§’è‰²æ˜¾ç¤ºåç§°
const displayName = getRoleDisplayName('admin'); // "ç®¡ç†å‘˜"

// è·å–è§’è‰²è¯¦ç»†é…ç½®
const config = getRoleConfig('admin');
console.log(config); 
// {
//   name: 'admin',
//   displayName: 'ç®¡ç†å‘˜',
//   description: 'ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™',
//   color: 'red',
//   icon: 'fas fa-crown'
// }
```

### 3. åœ¨UIç»„ä»¶ä¸­ä½¿ç”¨

```typescript
import { roleManager } from './src/config/roles';

// åˆ›å»ºè§’è‰²é€‰æ‹©å™¨
function createRoleSelector() {
    const roles = roleManager.getAllRoles();
    
    return roles.map(role => `
        <option value="${role.name}">
            ${role.displayName}
            ${role.description ? ` - ${role.description}` : ''}
        </option>
    `).join('');
}
```

## API å‚è€ƒ

### RoleManager ç±»

#### æ–¹æ³•

- `updateRolesFromBackend()`: ä»åç«¯æ›´æ–°è§’è‰²åˆ—è¡¨
- `getRoleDisplayName(roleName)`: è·å–è§’è‰²æ˜¾ç¤ºåç§°
- `getRoleConfig(roleName)`: è·å–è§’è‰²é…ç½®
- `getAllRoles()`: è·å–æ‰€æœ‰è§’è‰²
- `getAllRoleNames()`: è·å–æ‰€æœ‰è§’è‰²åç§°
- `addCustomRole(roleName, config)`: æ·»åŠ è‡ªå®šä¹‰è§’è‰²æ˜ å°„
- `isInitialized()`: æ£€æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–

### å…¨å±€å‡½æ•°

- `getRoleDisplayName(roleName)`: è·å–è§’è‰²æ˜¾ç¤ºåç§°
- `getRoleConfig(roleName)`: è·å–è§’è‰²é…ç½®
- `initializeRoleSystem()`: åˆå§‹åŒ–è§’è‰²ç³»ç»Ÿ

## é»˜è®¤è§’è‰²é…ç½®

ç³»ç»Ÿé¢„å®šä¹‰äº†ä»¥ä¸‹è§’è‰²ï¼š

| è§’è‰²å | æ˜¾ç¤ºåç§° | æè¿° | é¢œè‰² | å›¾æ ‡ |
|--------|----------|------|------|------|
| admin | ç®¡ç†å‘˜ | ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ | red | fas fa-crown |
| paid1 | VIPç”¨æˆ· | ä»˜è´¹ç”¨æˆ·ç­‰çº§1ï¼Œå¯ä½¿ç”¨åŸºç¡€ä»˜è´¹æœåŠ¡ | blue | fas fa-star |
| paid2 | é«˜çº§ç”¨æˆ· | ä»˜è´¹ç”¨æˆ·ç­‰çº§2ï¼Œå¯ä½¿ç”¨é«˜çº§ä»˜è´¹æœåŠ¡ | purple | fas fa-gem |
| user | æ™®é€šç”¨æˆ· | åŸºç¡€ç”¨æˆ·ï¼Œå¯ä½¿ç”¨å…è´¹æœåŠ¡ | gray | fas fa-user |

## è‡ªå®šä¹‰è§’è‰²

### æ·»åŠ è‡ªå®šä¹‰è§’è‰²æ˜ å°„

```typescript
import { roleManager } from './src/config/roles';

roleManager.addCustomRole('vip_plus', {
    displayName: 'VIP Plusç”¨æˆ·',
    description: 'é«˜çº§VIPç”¨æˆ·ï¼Œäº«å—æ‰€æœ‰ç‰¹æƒ',
    color: 'gold',
    icon: 'fas fa-diamond'
});
```

### æ‰©å±•é»˜è®¤é…ç½®

å¦‚æœåç«¯è¿”å›äº†æ–°çš„è§’è‰²ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ åˆ°è§’è‰²åˆ—è¡¨ä¸­ã€‚å¦‚æœè¯¥è§’è‰²åœ¨é»˜è®¤é…ç½®ä¸­å­˜åœ¨ï¼Œä¼šä½¿ç”¨é»˜è®¤é…ç½®çš„æ˜¾ç¤ºåç§°å’Œæ ·å¼ï¼›å¦åˆ™ä¼šä½¿ç”¨è§’è‰²åŸåä½œä¸ºæ˜¾ç¤ºåç§°ã€‚

## åç«¯APIè¦æ±‚

è§’è‰²ç®¡ç†ç³»ç»Ÿéœ€è¦åç«¯æä¾›ä»¥ä¸‹APIï¼š

### GET /admin/roles

è¿”å›æ ¼å¼ï¼š
```json
{
    "success": true,
    "data": {
        "roles": [
            {
                "id": 1,
                "name": "admin",
                "description": "ç³»ç»Ÿç®¡ç†å‘˜",
                "created_at": "2025-01-01T00:00:00Z",
                "updated_at": "2025-01-01T00:00:00Z"
            }
        ]
    }
}
```

## æœ€ä½³å®è·µ

1. **åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–**: åœ¨åº”ç”¨çš„ä¸»å…¥å£ç‚¹è°ƒç”¨ `initializeRoleSystem()`
2. **ä½¿ç”¨ç»Ÿä¸€å‡½æ•°**: å§‹ç»ˆä½¿ç”¨ `getRoleDisplayName()` è€Œä¸æ˜¯ç¡¬ç¼–ç è§’è‰²åç§°
3. **åŠ¨æ€æ›´æ–°**: åœ¨éœ€è¦æœ€æ–°è§’è‰²æ•°æ®æ—¶è°ƒç”¨ `roleManager.updateRolesFromBackend()`
4. **é”™è¯¯å¤„ç†**: å¤„ç†è§’è‰²ä¸å­˜åœ¨çš„æƒ…å†µï¼Œæä¾›åˆç†çš„é™çº§æ˜¾ç¤º

## ä½¿ç”¨ç¤ºä¾‹

æ›´å¤šè¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹è¯·å‚è€ƒ `examples/role-usage-examples.ts` æ–‡ä»¶ã€‚

## æ³¨æ„äº‹é¡¹

- è§’è‰²ç³»ç»Ÿæ˜¯å•ä¾‹æ¨¡å¼ï¼Œå…¨å±€å…±äº«çŠ¶æ€
- åˆå§‹åŒ–æ˜¯å¼‚æ­¥çš„ï¼Œç¡®ä¿åœ¨ä½¿ç”¨å‰å®Œæˆåˆå§‹åŒ–
- è§’è‰²é…ç½®æ”¯æŒé¢œè‰²å’Œå›¾æ ‡ï¼Œå¯ç”¨äºUIæ˜¾ç¤º
- ç³»ç»Ÿä¼šè‡ªåŠ¨åˆå¹¶é»˜è®¤é…ç½®å’Œåç«¯æ•°æ®
